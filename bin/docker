#!/bin/bash
#
# OriginPHP Framework
# Copyright 2018 - 2021 Jamiel Sharief.
#
# Licensed under The MIT License
# The above copyright notice and this permission notice shall be included in all copies or substantial
# portions of the Software.
#
# @copyright    Copyright (c) Jamiel Sharief
# @link         https://www.originphp.com
# @license      https://opensource.org/licenses/mit-license.php MIT License
#
# This loads all the services for docker, you can add or remove by editing the line that starts with export.
# Use CTRL - C to shutdown (if not you will have to use docker-down --remove-orphans )
# 
# For example if you prefered to use postgreSQL instead
# export COMPOSE_FILE=docker-compose.yml:config/docker/postgres.yml:config/docker/redis.yml:config/docker/minio.yml:config/docker/mailhog.yml
#
trap shutdown INT

function shutdown() {
        docker-compose down
        unset COMPOSE_FILE
}

# edit services here, each service should be seperated with a :
export COMPOSE_FILE=docker-compose.yml:config/docker/mysql.yml:config/docker/redis.yml:config/docker/minio.yml:config/docker/mailhog.yml

project_name=$(basename `pwd`)

if [ "$1" = "up" ]
  then
  echo "OriginPHP Docker Script"
  echo "Use CTRL - C to shutdown properly."
  echo ""
fi

# To start a container:
#
# $ bin/docker up
#
# To enter a container:
#
# $ bin/docker run app bash

docker-compose -p $project_name "$@"